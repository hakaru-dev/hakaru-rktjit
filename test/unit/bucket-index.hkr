[(fn w (array nat)
     [(let (res (pair (array nat) unit)
                        [(bucket [0 : nat]
                         [(size [w : (array nat)]) : nat]
                         (r_fanout
                          (r_index [(size w) : nat]
                                   (bind i [(index [w : (array nat)] [i : nat]) : nat])
                                   (r_add (bind i (bind docUpdate [1 : nat]))))
                          r_nop)) : (pair (array nat) unit)])
        [(car res) : (array nat)])
          : (array nat)])
: ((array nat) -> (array nat))]
